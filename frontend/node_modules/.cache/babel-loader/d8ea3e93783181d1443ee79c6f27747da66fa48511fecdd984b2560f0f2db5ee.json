{"ast":null,"code":"import { removeCSS, updateCSS } from \"@rc-component/util/es/Dom/dynamicCSS\";\nimport { useContext } from 'react';\nimport StyleContext, { ATTR_MARK, ATTR_TOKEN, CSS_IN_JS_INSTANCE } from \"../StyleContext\";\nimport { isClientSide, toStyleStr } from \"../util\";\nimport { transformToken } from \"../util/css-variables\";\nimport useGlobalCache from \"./useGlobalCache\";\nimport { uniqueHash } from \"./useStyleRegister\";\nexport const CSS_VAR_PREFIX = 'cssVar';\nconst useCSSVarRegister = (config, fn) => {\n  const {\n    key,\n    prefix,\n    unitless,\n    ignore,\n    token,\n    hashId,\n    scope\n  } = config;\n  const {\n    cache: {\n      instanceId\n    },\n    container,\n    hashPriority\n  } = useContext(StyleContext);\n  const {\n    _tokenKey: tokenKey\n  } = token;\n  const scopeKey = Array.isArray(scope) ? scope.join('@@') : scope;\n  const stylePath = [...config.path, key, scopeKey, tokenKey];\n  const cache = useGlobalCache(CSS_VAR_PREFIX, stylePath, () => {\n    const originToken = fn();\n    const [mergedToken, cssVarsStr] = transformToken(originToken, key, {\n      prefix,\n      unitless,\n      ignore,\n      scope,\n      hashPriority,\n      hashCls: hashId\n    });\n    const styleId = uniqueHash(stylePath, cssVarsStr);\n    return [mergedToken, cssVarsStr, styleId, key];\n  }, ([,, styleId]) => {\n    if (isClientSide) {\n      removeCSS(styleId, {\n        mark: ATTR_MARK,\n        attachTo: container\n      });\n    }\n  }, ([, cssVarsStr, styleId]) => {\n    if (!cssVarsStr) {\n      return;\n    }\n    const style = updateCSS(cssVarsStr, styleId, {\n      mark: ATTR_MARK,\n      prepend: 'queue',\n      attachTo: container,\n      priority: -999\n    });\n    style[CSS_IN_JS_INSTANCE] = instanceId;\n\n    // Used for `useCacheToken` to remove on batch when token removed\n    style.setAttribute(ATTR_TOKEN, key);\n  });\n  return cache;\n};\nexport const extract = (cache, effectStyles, options) => {\n  const [, styleStr, styleId, cssVarKey] = cache;\n  const {\n    plain\n  } = options || {};\n  if (!styleStr) {\n    return null;\n  }\n  const order = -999;\n\n  // ====================== Style ======================\n  // Used for @rc-component/util\n  const sharedAttrs = {\n    'data-rc-order': 'prependQueue',\n    'data-rc-priority': `${order}`\n  };\n  const styleText = toStyleStr(styleStr, cssVarKey, styleId, sharedAttrs, plain);\n  return [order, styleId, styleText];\n};\nexport default useCSSVarRegister;","map":{"version":3,"names":["removeCSS","updateCSS","useContext","StyleContext","ATTR_MARK","ATTR_TOKEN","CSS_IN_JS_INSTANCE","isClientSide","toStyleStr","transformToken","useGlobalCache","uniqueHash","CSS_VAR_PREFIX","useCSSVarRegister","config","fn","key","prefix","unitless","ignore","token","hashId","scope","cache","instanceId","container","hashPriority","_tokenKey","tokenKey","scopeKey","Array","isArray","join","stylePath","path","originToken","mergedToken","cssVarsStr","hashCls","styleId","mark","attachTo","style","prepend","priority","setAttribute","extract","effectStyles","options","styleStr","cssVarKey","plain","order","sharedAttrs","styleText"],"sources":["D:/ZSM/beachboys-concert/frontend/node_modules/@ant-design/cssinjs/es/hooks/useCSSVarRegister.js"],"sourcesContent":["import { removeCSS, updateCSS } from \"@rc-component/util/es/Dom/dynamicCSS\";\nimport { useContext } from 'react';\nimport StyleContext, { ATTR_MARK, ATTR_TOKEN, CSS_IN_JS_INSTANCE } from \"../StyleContext\";\nimport { isClientSide, toStyleStr } from \"../util\";\nimport { transformToken } from \"../util/css-variables\";\nimport useGlobalCache from \"./useGlobalCache\";\nimport { uniqueHash } from \"./useStyleRegister\";\nexport const CSS_VAR_PREFIX = 'cssVar';\nconst useCSSVarRegister = (config, fn) => {\n  const {\n    key,\n    prefix,\n    unitless,\n    ignore,\n    token,\n    hashId,\n    scope\n  } = config;\n  const {\n    cache: {\n      instanceId\n    },\n    container,\n    hashPriority\n  } = useContext(StyleContext);\n  const {\n    _tokenKey: tokenKey\n  } = token;\n  const scopeKey = Array.isArray(scope) ? scope.join('@@') : scope;\n  const stylePath = [...config.path, key, scopeKey, tokenKey];\n  const cache = useGlobalCache(CSS_VAR_PREFIX, stylePath, () => {\n    const originToken = fn();\n    const [mergedToken, cssVarsStr] = transformToken(originToken, key, {\n      prefix,\n      unitless,\n      ignore,\n      scope,\n      hashPriority,\n      hashCls: hashId\n    });\n    const styleId = uniqueHash(stylePath, cssVarsStr);\n    return [mergedToken, cssVarsStr, styleId, key];\n  }, ([,, styleId]) => {\n    if (isClientSide) {\n      removeCSS(styleId, {\n        mark: ATTR_MARK,\n        attachTo: container\n      });\n    }\n  }, ([, cssVarsStr, styleId]) => {\n    if (!cssVarsStr) {\n      return;\n    }\n    const style = updateCSS(cssVarsStr, styleId, {\n      mark: ATTR_MARK,\n      prepend: 'queue',\n      attachTo: container,\n      priority: -999\n    });\n    style[CSS_IN_JS_INSTANCE] = instanceId;\n\n    // Used for `useCacheToken` to remove on batch when token removed\n    style.setAttribute(ATTR_TOKEN, key);\n  });\n  return cache;\n};\nexport const extract = (cache, effectStyles, options) => {\n  const [, styleStr, styleId, cssVarKey] = cache;\n  const {\n    plain\n  } = options || {};\n  if (!styleStr) {\n    return null;\n  }\n  const order = -999;\n\n  // ====================== Style ======================\n  // Used for @rc-component/util\n  const sharedAttrs = {\n    'data-rc-order': 'prependQueue',\n    'data-rc-priority': `${order}`\n  };\n  const styleText = toStyleStr(styleStr, cssVarKey, styleId, sharedAttrs, plain);\n  return [order, styleId, styleText];\n};\nexport default useCSSVarRegister;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}