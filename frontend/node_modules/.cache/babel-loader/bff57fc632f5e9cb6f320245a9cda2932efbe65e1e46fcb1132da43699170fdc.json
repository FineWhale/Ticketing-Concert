{"ast":null,"code":"const SPLIT = '__@field_split__';\n\n/**\n * Convert name path into string to fast the fetch speed of Map.\n */\nfunction normalize(namePath) {\n  return namePath.map(cell => `${typeof cell}:${cell}`)\n  // Magic split\n  .join(SPLIT);\n}\n\n/**\n * NameMap like a `Map` but accepts `string[]` as key.\n */\nclass NameMap {\n  kvs = new Map();\n  set(key, value) {\n    this.kvs.set(normalize(key), value);\n  }\n  get(key) {\n    return this.kvs.get(normalize(key));\n  }\n  getAsPrefix(key) {\n    const normalizedKey = normalize(key);\n    const normalizedPrefix = normalizedKey + SPLIT;\n    const results = [];\n    const current = this.kvs.get(normalizedKey);\n    if (current !== undefined) {\n      results.push(current);\n    }\n    this.kvs.forEach((value, itemNormalizedKey) => {\n      if (itemNormalizedKey.startsWith(normalizedPrefix)) {\n        results.push(value);\n      }\n    });\n    return results;\n  }\n  update(key, updater) {\n    const origin = this.get(key);\n    const next = updater(origin);\n    if (!next) {\n      this.delete(key);\n    } else {\n      this.set(key, next);\n    }\n  }\n  delete(key) {\n    this.kvs.delete(normalize(key));\n  }\n\n  // Since we only use this in test, let simply realize this\n  map(callback) {\n    return [...this.kvs.entries()].map(([key, value]) => {\n      const cells = key.split(SPLIT);\n      return callback({\n        key: cells.map(cell => {\n          const [, type, unit] = cell.match(/^([^:]*):(.*)$/);\n          return type === 'number' ? Number(unit) : unit;\n        }),\n        value\n      });\n    });\n  }\n  toJSON() {\n    const json = {};\n    this.map(({\n      key,\n      value\n    }) => {\n      json[key.join('.')] = value;\n      return null;\n    });\n    return json;\n  }\n}\nexport default NameMap;","map":{"version":3,"names":["SPLIT","normalize","namePath","map","cell","join","NameMap","kvs","Map","set","key","value","get","getAsPrefix","normalizedKey","normalizedPrefix","results","current","undefined","push","forEach","itemNormalizedKey","startsWith","update","updater","origin","next","delete","callback","entries","cells","split","type","unit","match","Number","toJSON","json"],"sources":["D:/ZSM/beachboys-concert/frontend/node_modules/@rc-component/form/es/utils/NameMap.js"],"sourcesContent":["const SPLIT = '__@field_split__';\n\n/**\n * Convert name path into string to fast the fetch speed of Map.\n */\nfunction normalize(namePath) {\n  return namePath.map(cell => `${typeof cell}:${cell}`)\n  // Magic split\n  .join(SPLIT);\n}\n\n/**\n * NameMap like a `Map` but accepts `string[]` as key.\n */\nclass NameMap {\n  kvs = new Map();\n  set(key, value) {\n    this.kvs.set(normalize(key), value);\n  }\n  get(key) {\n    return this.kvs.get(normalize(key));\n  }\n  getAsPrefix(key) {\n    const normalizedKey = normalize(key);\n    const normalizedPrefix = normalizedKey + SPLIT;\n    const results = [];\n    const current = this.kvs.get(normalizedKey);\n    if (current !== undefined) {\n      results.push(current);\n    }\n    this.kvs.forEach((value, itemNormalizedKey) => {\n      if (itemNormalizedKey.startsWith(normalizedPrefix)) {\n        results.push(value);\n      }\n    });\n    return results;\n  }\n  update(key, updater) {\n    const origin = this.get(key);\n    const next = updater(origin);\n    if (!next) {\n      this.delete(key);\n    } else {\n      this.set(key, next);\n    }\n  }\n  delete(key) {\n    this.kvs.delete(normalize(key));\n  }\n\n  // Since we only use this in test, let simply realize this\n  map(callback) {\n    return [...this.kvs.entries()].map(([key, value]) => {\n      const cells = key.split(SPLIT);\n      return callback({\n        key: cells.map(cell => {\n          const [, type, unit] = cell.match(/^([^:]*):(.*)$/);\n          return type === 'number' ? Number(unit) : unit;\n        }),\n        value\n      });\n    });\n  }\n  toJSON() {\n    const json = {};\n    this.map(({\n      key,\n      value\n    }) => {\n      json[key.join('.')] = value;\n      return null;\n    });\n    return json;\n  }\n}\nexport default NameMap;"],"mappings":"AAAA,MAAMA,KAAK,GAAG,kBAAkB;;AAEhC;AACA;AACA;AACA,SAASC,SAASA,CAACC,QAAQ,EAAE;EAC3B,OAAOA,QAAQ,CAACC,GAAG,CAACC,IAAI,IAAI,GAAG,OAAOA,IAAI,IAAIA,IAAI,EAAE;EACpD;EAAA,CACCC,IAAI,CAACL,KAAK,CAAC;AACd;;AAEA;AACA;AACA;AACA,MAAMM,OAAO,CAAC;EACZC,GAAG,GAAG,IAAIC,GAAG,CAAC,CAAC;EACfC,GAAGA,CAACC,GAAG,EAAEC,KAAK,EAAE;IACd,IAAI,CAACJ,GAAG,CAACE,GAAG,CAACR,SAAS,CAACS,GAAG,CAAC,EAAEC,KAAK,CAAC;EACrC;EACAC,GAAGA,CAACF,GAAG,EAAE;IACP,OAAO,IAAI,CAACH,GAAG,CAACK,GAAG,CAACX,SAAS,CAACS,GAAG,CAAC,CAAC;EACrC;EACAG,WAAWA,CAACH,GAAG,EAAE;IACf,MAAMI,aAAa,GAAGb,SAAS,CAACS,GAAG,CAAC;IACpC,MAAMK,gBAAgB,GAAGD,aAAa,GAAGd,KAAK;IAC9C,MAAMgB,OAAO,GAAG,EAAE;IAClB,MAAMC,OAAO,GAAG,IAAI,CAACV,GAAG,CAACK,GAAG,CAACE,aAAa,CAAC;IAC3C,IAAIG,OAAO,KAAKC,SAAS,EAAE;MACzBF,OAAO,CAACG,IAAI,CAACF,OAAO,CAAC;IACvB;IACA,IAAI,CAACV,GAAG,CAACa,OAAO,CAAC,CAACT,KAAK,EAAEU,iBAAiB,KAAK;MAC7C,IAAIA,iBAAiB,CAACC,UAAU,CAACP,gBAAgB,CAAC,EAAE;QAClDC,OAAO,CAACG,IAAI,CAACR,KAAK,CAAC;MACrB;IACF,CAAC,CAAC;IACF,OAAOK,OAAO;EAChB;EACAO,MAAMA,CAACb,GAAG,EAAEc,OAAO,EAAE;IACnB,MAAMC,MAAM,GAAG,IAAI,CAACb,GAAG,CAACF,GAAG,CAAC;IAC5B,MAAMgB,IAAI,GAAGF,OAAO,CAACC,MAAM,CAAC;IAC5B,IAAI,CAACC,IAAI,EAAE;MACT,IAAI,CAACC,MAAM,CAACjB,GAAG,CAAC;IAClB,CAAC,MAAM;MACL,IAAI,CAACD,GAAG,CAACC,GAAG,EAAEgB,IAAI,CAAC;IACrB;EACF;EACAC,MAAMA,CAACjB,GAAG,EAAE;IACV,IAAI,CAACH,GAAG,CAACoB,MAAM,CAAC1B,SAAS,CAACS,GAAG,CAAC,CAAC;EACjC;;EAEA;EACAP,GAAGA,CAACyB,QAAQ,EAAE;IACZ,OAAO,CAAC,GAAG,IAAI,CAACrB,GAAG,CAACsB,OAAO,CAAC,CAAC,CAAC,CAAC1B,GAAG,CAAC,CAAC,CAACO,GAAG,EAAEC,KAAK,CAAC,KAAK;MACnD,MAAMmB,KAAK,GAAGpB,GAAG,CAACqB,KAAK,CAAC/B,KAAK,CAAC;MAC9B,OAAO4B,QAAQ,CAAC;QACdlB,GAAG,EAAEoB,KAAK,CAAC3B,GAAG,CAACC,IAAI,IAAI;UACrB,MAAM,GAAG4B,IAAI,EAAEC,IAAI,CAAC,GAAG7B,IAAI,CAAC8B,KAAK,CAAC,gBAAgB,CAAC;UACnD,OAAOF,IAAI,KAAK,QAAQ,GAAGG,MAAM,CAACF,IAAI,CAAC,GAAGA,IAAI;QAChD,CAAC,CAAC;QACFtB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EACAyB,MAAMA,CAAA,EAAG;IACP,MAAMC,IAAI,GAAG,CAAC,CAAC;IACf,IAAI,CAAClC,GAAG,CAAC,CAAC;MACRO,GAAG;MACHC;IACF,CAAC,KAAK;MACJ0B,IAAI,CAAC3B,GAAG,CAACL,IAAI,CAAC,GAAG,CAAC,CAAC,GAAGM,KAAK;MAC3B,OAAO,IAAI;IACb,CAAC,CAAC;IACF,OAAO0B,IAAI;EACb;AACF;AACA,eAAe/B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}